import './polyfills.server.mjs';
import{j as o}from"./chunk-QTLZ2W53.mjs";import{Ba as g,J as n,P as a}from"./chunk-L6BTOZRI.mjs";var d=class e{AUTH_TOKEN_KEY="authToken";USERS_KEY="registeredUsers";isAuthenticatedSignal=g(!1);_router=a(o);constructor(){this.initializeSession()}initializeSession(){typeof window<"u"&&typeof window.sessionStorage<"u"&&sessionStorage.getItem(this.AUTH_TOKEN_KEY)&&this.isAuthenticatedSignal.set(!0)}login(t,i){if(this.getRegisteredUsers().find(s=>s.username===t&&s.password===i)){let s=this.generateAuthToken(t);return sessionStorage.setItem(this.AUTH_TOKEN_KEY,s),this.isAuthenticatedSignal.set(!0),!0}return!1}logout(){typeof window<"u"&&typeof window.sessionStorage<"u"&&sessionStorage.removeItem(this.AUTH_TOKEN_KEY),this.isAuthenticatedSignal.set(!1),this._router.navigate(["/login"])}register(t,i){let r=this.getRegisteredUsers();return r.some(u=>u.username===t)?!1:(r.push({username:t,password:i}),this.saveRegisteredUsers(r),!0)}isAuthenticated(){return this.isAuthenticatedSignal()}getAuthSignal(){return this.isAuthenticatedSignal}getRegisteredUsers(){let t=localStorage.getItem(this.USERS_KEY);return t?JSON.parse(t):[]}saveRegisteredUsers(t){localStorage.setItem(this.USERS_KEY,JSON.stringify(t))}generateAuthToken(t){return`${t}-${new Date().getTime()}`}static \u0275fac=function(i){return new(i||e)};static \u0275prov=n({token:e,factory:e.\u0275fac,providedIn:"root"})};var l=class e{_router=a(o);navigateToLoginFromAuthOutlet(){this._router.navigate(["authenticate",{outlets:{auth:["login"]}}])}navigateToRegisterFromAuthOutlet(){this._router.navigate(["authenticate",{outlets:{auth:["register"]}}])}navigateToRecovery(){this._router.navigate(["authenticate",{outlets:{auth:["recovery-password"]}}])}navigateToFeedFromPrincipalOutlet(){this._router.navigate(["container",{outlets:{principal:["feed"]}}])}navigateToDashboardFromAdminOutlet(){this._router.navigate(["admin",{outlets:{admin:["dashboard"]}}])}navigateToUsersFromAdminOutlet(){this._router.navigate(["admin",{outlets:{admin:["users"]}}])}static \u0275fac=function(i){return new(i||e)};static \u0275prov=n({token:e,factory:e.\u0275fac,providedIn:"root"})};export{d as a,l as b};
